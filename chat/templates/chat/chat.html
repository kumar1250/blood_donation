{% extends "chat/base.html" %}
{% block title %}Chat with {{ other_user.username }}{% endblock %}

{% block content %}
<h3>Chat with {{ other_user.username }}</h3>

<div id="chat-box" class="border rounded p-3 mb-3" style="height: 300px; overflow-y:auto; background:#f8f9fa;">
    {% for msg in messages %}
        {% if msg.sender == user %}
            <div class="text-end mb-2">
                <span class="badge bg-primary">{{ msg.message|linebreaksbr }}</span><br>
                <small class="text-muted">{{ msg.timestamp }}</small>
            </div>
        {% else %}
            <div class="text-start mb-2">
                <span class="badge bg-secondary">{{ msg.message|linebreaksbr }}</span><br>
                <small class="text-muted">{{ msg.timestamp }}</small>
            </div>
        {% endif %}
    {% empty %}
        <p class="text-muted">No messages yet. Say hello!</p>
    {% endfor %}
</div>

<form method="post">
    {% csrf_token %}
    <div class="input-group">
        <input type="text" name="message" class="form-control" placeholder="Type a message..." required>
        <button class="btn btn-primary" type="submit">Send</button>
    </div>
</form>

<p class="mt-3"><a href="{% url 'chat_home' %}">‚Üê Back to users</a></p>
{% endblock %}
